import{I as q,H as C,h as $,_ as f,b as a,o as s,c as r,d as o,e,w as g,t as k,j as _,B as b,m as w,i as L,F as y,k as I,g as H}from"./index-9cacae3f.js";import{H as V}from"./QuantityBox-ca06761b.js";import{H as B}from"./Shimmer-58a3532c.js";import{H as U}from"./EmptyBlock-aad9e862.js";import{a as S}from"./ErrorBlock-bf6c0494.js";import"./Paragraph-e2a85ea9.js";const Q={name:"HeraProductItem",components:{Icon:q,HeraButton:C,HeraQuantityBox:V},props:{product:{type:Object,required:!0}},data:()=>({baseURL:"https://hera.mobiladvocate.com/",quantity:null}),computed:{...$({isLoggedIn:"auth/isLoggedIn",isProductInCart:"cart/isProductInCart"})},methods:{updateUserCart(){this.$store.dispatch("cart/updateUserCart",{product:this.product,quantity:this.quantity})},addToCart(){this.$store.dispatch("cart/addToCart",{product:this.product,quantity:this.quantity}),this.updateUserCart()},updateQuantity(t){this.quantity=t,this.product.in_stock>=this.quantity&&this.isProductInCart(this.product.slug)&&(this.$store.dispatch("cart/updateCartQuantity",{product:this.product,quantity:this.quantity}),this.updateUserCart())}},mounted(){const t=this.isProductInCart(this.product.slug);this.quantity=t?t.quantity:1}},x={class:"product-item"},A={class:"product-item__wrapper"},E={class:"product-item__image product-item-ibg-cover"},N=["src","alt"],T={class:"product-item__info product-item-info"},j={class:"product-item-info__name line-clamp-2"},F={key:0,class:"product-item-info__numbers"},R={class:"product-item-info__price"},z={class:"product-item__action"};function D(t,n,i,v,p,d){const c=a("router-link"),l=a("hera-quantity-box"),h=a("Icon"),m=a("hera-button");return s(),r("div",x,[o("div",A,[e(c,{to:{name:"product",params:{id:i.product.slug}},class:"product-item__link"},{default:g(()=>[o("div",E,[o("img",{src:t.baseURL+i.product.image,alt:i.product.title},null,8,N)])]),_:1},8,["to"]),o("div",T,[e(c,{to:{name:"product",params:{id:i.product.slug}},class:"product-item-info__link"},{default:g(()=>[o("h3",j,k(i.product.title),1)]),_:1},8,["to"]),t.quantity?(s(),r("div",F,[o("h5",R,"$"+k(i.product.price),1),e(l,{class:"product-item-info__quantity",qyt:t.quantity,maxValue:i.product.in_stock,onUpdate:d.updateQuantity},null,8,["qyt","maxValue","onUpdate"])])):_("",!0)]),o("div",z,[e(m,{onClick:n[0]||(n[0]=P=>t.isLoggedIn?this.isProductInCart(this.product.slug)?null:d.addToCart():null),isLink:!!this.isProductInCart(this.product.slug)||!t.isLoggedIn,link:{name:t.isLoggedIn?"cart":"signIn"},class:b(["product-item__button",this.isProductInCart(this.product.slug)?"primary":"_outline"]),text:this.isProductInCart(this.product.slug)?"In the cart":"Add to cart"},{iconAfter:g(()=>[e(h,{class:"ml-1 text-base",icon:"mdi:cart"})]),_:1},8,["isLink","link","class","text"])])])])}const G=f(Q,[["render",D],["__scopeId","data-v-517fe923"]]);const O={name:"HeraProductShimmer",components:{HeraShimmer:B}},J={class:"product-shimmer"},K={class:"product-shimmer__wrapper"},M={class:"product-shimmer__image"},W={class:"product-shimmer__info product-shimmer-info"},X={class:"flex gap-3"},Y={class:"product-shimmer__action"};function Z(t,n,i,v,p,d){const c=a("hera-shimmer");return s(),r("div",J,[o("div",K,[o("div",M,[e(c,{classes:["aspect-square","h-full","w-full","overflow-hidden","rounded-3xl"]})]),o("div",W,[e(c,{classes:["h-6","w-full","mb-2"]}),e(c,{classes:["h-6","w-1/2","mb-4"]}),o("div",X,[e(c,{classes:["h-6","w-14"]}),e(c,{classes:["h-6","w-14"]})])]),o("div",Y,[e(c,{classes:["h-12","rounded-full","w-full"]})])])])}const tt=f(O,[["render",Z],["__scopeId","data-v-a2d462e4"]]);const et={name:"ProductsView",components:{HeraProductItem:G,HeraProductShimmer:tt,HeraEmptyBlock:U,HeraErrorBlock:S},data(){return{currentPage:1}},computed:{...w({isLoading:t=>t.shop.products.isLoading,error:t=>t.shop.products.error}),...$({productList:"shop/products/productList",paginator:"shop/products/paginator"}),categorySlug(){return this.$route.query.category},searchQuery(){return this.$route.query.search}},methods:{...L({getProducts:"shop/products/getProducts",searchProduct:"shop/products/searchProduct"}),fetchProducts(){this.searchQuery?this.searchProduct({query:this.searchQuery,page:this.currentPage}):this.getProducts({slug:this.$route.query.category??"all",page:this.currentPage})}},mounted(){this.fetchProducts()},watch:{categorySlug(){this.currentPage=1,this.fetchProducts()}}},st={class:"products"},ot={class:"products__wrapper"},rt={key:0,class:"products__empty"},ct={key:1,class:"products__list"},at={key:0,class:"products__list"},it={key:1,class:"products__empty"},nt={key:2,class:"products__pagination"};function ut(t,n,i,v,p,d){const c=a("hera-error-block"),l=a("hera-product-shimmer"),h=a("hera-product-item"),m=a("hera-empty-block"),P=a("vue-awesome-paginate");return s(),r("div",st,[o("div",ot,[t.error?(s(),r("div",rt,[e(c)])):_("",!0),t.isLoading?(s(),r("div",ct,[(s(),r(y,null,I(12,u=>e(l,{key:u})),64))])):_("",!0),t.productList?(s(),r(y,{key:2},[t.productList.length?(s(),r("div",at,[(s(!0),r(y,null,I(t.productList,u=>(s(),H(h,{key:u.slug,product:u},null,8,["product"]))),128))])):(s(),r("div",it,[e(m,{text:"products"})])),t.productList.length&&t.paginator&&t.paginator.products_count>12?(s(),r("div",nt,[e(P,{"total-items":t.paginator.products_count,"items-per-page":12,"max-pages-shown":3,modelValue:p.currentPage,"onUpdate:modelValue":n[0]||(n[0]=u=>p.currentPage=u),"on-click":d.fetchProducts},null,8,["total-items","modelValue","on-click"])])):_("",!0)],64)):_("",!0)])])}const gt=f(et,[["render",ut],["__scopeId","data-v-c20635d3"]]);export{gt as default};
