import{I as x,D as M,E as k,G as F,H as R,_ as w,b as r,o as a,c as _,d as e,t as b,e as t,w as v,J as H,M as S,p as C,f as V,m as B,h as E,i as L,j as f,F as g,k as $,g as N}from"./index-3db6c8ff.js";import{H as A}from"./Shimmer-8953e72a.js";import{H as q}from"./EmptyBlock-6ae9b046.js";import{a as j}from"./ErrorBlock-575dd676.js";import"./Paragraph-83f8015f.js";const D={name:"LoginView",components:{Icon:x,Form:M,Field:k,ErrorMessage:F,HeraButton:R},props:{review:{type:Object,required:!1}},data(){return{validationSchema:{name:"required|min:3|max:50",text:"required|min:8|max:1000"},formValues:{name:this.review?this.review.title:null,text:this.review?this.review.text:null,image:this.review?this.review.image:null},selectedImage:null,selectedImageName:null}},methods:{onSubmitReview(){const s=new FormData;s.append("image",this.selectedImage),console.log(s)},onFileChange(s){const o=s.target.files[0];this.selectedImageName=o.name;const n=new FileReader;n.readAsArrayBuffer(o),n.onload=()=>{this.selectedImage=new Uint8Array(n.result)}}}},U={class:"review-modal"},G={class:"review-modal__wrapper"},O={class:"review-modal__title"},J={class:"review-modal-form__group"},P={class:"review-modal-form__group"},z={class:"review-modal-form__group"},K={for:"upload-image",class:"absolute left-0 top-0 h-full w-full cursor-pointer"};function Q(s,o,n,p,m,c){const i=r("Field"),d=r("ErrorMessage"),h=r("Icon"),u=r("hera-button"),y=r("Form");return a(),_("div",U,[e("div",G,[e("h3",O,b(this.review?"Edit the review":"Create a review"),1),t(y,{class:"review-modal__form review-modal-form",onSubmit:c.onSubmitReview,"validation-schema":m.validationSchema,"initial-values":m.formValues},{default:v(()=>[e("div",J,[t(i,{type:"text",name:"name",class:"review-modal-form__input input",placeholder:"Name"}),t(d,{name:"name",class:"error-message"})]),e("div",P,[t(i,{name:"text"},{default:v(({field:l})=>[e("textarea",H(l,{class:"review-modal-form__textarea input",name:"text",rows:"8",placeholder:"Feedback"}),null,16)]),_:1}),t(d,{name:"text",class:"error-message"})]),e("div",z,[t(u,{class:"review-modal-form__button _outline",onClick:o[1]||(o[1]=l=>m.formValues.image=null),text:m.formValues.image?"Remove the picture":m.selectedImageName?m.selectedImageName:"Add a picture"},S({iconBefore:v(()=>[t(h,{class:"mr-1 text-base",icon:"material-symbols:image"})]),_:2},[m.formValues.image?void 0:{name:"content",fn:v(()=>[t(i,{name:"image"},{default:v(()=>[e("label",K,[e("input",{id:"upload-image",type:"file",name:"image",onChange:o[0]||(o[0]=(...l)=>c.onFileChange&&c.onFileChange(...l)),accept:"image/png, image/jpeg",class:"hidden"},null,32)])]),_:1})]),key:"0"}]),1032,["text"])]),t(u,{class:"review-modal-form__button primary",type:"submit",text:"Submit review"})]),_:1},8,["onSubmit","validation-schema","initial-values"])])])}const I=w(D,[["render",Q],["__scopeId","data-v-f719ecbb"]]);const T={name:"HeraMyReviewItem",components:{Icon:x},props:{review:{type:Object,required:!0}},methods:{openModal(){this.$vfm.show({component:"HeraCustomModal",bind:{name:"ReviewForm"},slots:{default:{component:I,bind:{review:this.review}}}})}}},W=s=>(C("data-v-67e1804a"),s=s(),V(),s),X={class:"my-review-item"},Y={class:"my-review-item__wrapper"},Z={class:"my-review-item__content"},ee={class:"my-review-item__image my-review-item-ibg-cover"},se=["src","alt"],te={class:"my-review-item__info"},ie={class:"my-review-item__title"},oe={class:"my-review-item__text"},ae=W(()=>e("span",null,"Edit review",-1));function re(s,o,n,p,m,c){const i=r("Icon");return a(),_("div",X,[e("div",Y,[e("div",Z,[e("div",ee,[e("img",{src:n.review.image,alt:n.review.title},null,8,se)]),e("div",te,[e("h4",ie,b(n.review.title),1),e("p",oe,b(n.review.text),1)])]),e("button",{onClick:o[0]||(o[0]=(...d)=>c.openModal&&c.openModal(...d)),class:"my-review-item__button"},[t(i,{icon:"material-symbols:edit"}),ae])])])}const ne=w(T,[["render",re],["__scopeId","data-v-67e1804a"]]);const _e={name:"HeraMyReviewItem",components:{HeraShimmer:A}},me={class:"my-review-item"},ce={class:"my-review-item__wrapper"},le={class:"my-review-item__content"},de={class:"my-review-item__image"},ve={class:"my-review-item__info"},we={class:"my-review-item__title"},pe={class:"my-review-item__text"},ue={class:"my-review-item__button"};function he(s,o,n,p,m,c){const i=r("hera-shimmer");return a(),_("div",me,[e("div",ce,[e("div",le,[e("div",de,[t(i,{classes:["aspect-square","h-full","w-full"]})]),e("div",ve,[e("div",we,[t(i,{classes:["h-5","w-1/2"]})]),e("p",pe,[t(i,{classes:["h-3","w-full","mb-1"]}),t(i,{classes:["h-3","w-3/4"]})])])]),e("div",ue,[t(i,{classes:["h-5","w-full"]})])])])}const ye=w(_e,[["render",he],["__scopeId","data-v-395c0dc5"]]);const fe={name:"HeraMyReviewsList",components:{HeraMyReviewItem:ne,HeraMyReviewShimmer:ye,HeraButton:R,HeraEmptyBlock:q,HeraErrorBlock:j},computed:{...B({isLoading:s=>s.reviews.isLoading,error:s=>s.reviews.error}),...E({userReviews:"reviews/userReviews"})},methods:{...L({getUserReviews:"reviews/getUserReviews"}),openModal(){this.$vfm.show({component:"HeraCustomModal",bind:{name:"ReviewForm"},slots:{default:{component:I}}})}},mounted(){this.getUserReviews()}},ge={class:"my-reviews-list"},be={class:"my-reviews-list__wrapper"},$e={key:0,class:"my-reviews-list__empty"},xe={key:1,class:"my-reviews-list__column"},Re={key:0,class:"my-reviews-list__column"},Ie={key:1,class:"my-reviews-list__empty"};function Me(s,o,n,p,m,c){const i=r("hera-error-block"),d=r("hera-my-review-shimmer"),h=r("hera-my-review-item"),u=r("hera-empty-block"),y=r("hera-button");return a(),_("div",ge,[e("div",be,[s.error?(a(),_("div",$e,[t(i)])):f("",!0),s.isLoading?(a(),_("div",xe,[(a(),_(g,null,$(6,l=>t(d,{key:l})),64))])):f("",!0),s.userReviews?(a(),_(g,{key:2},[s.userReviews.length?(a(),_("div",Re,[(a(!0),_(g,null,$(s.userReviews,l=>(a(),N(h,{class:"my-reviews-list__item",key:l.id,review:l},null,8,["review"]))),128))])):(a(),_("div",Ie,[t(u,{text:"reviews"})]))],64)):f("",!0),t(y,{onClick:c.openModal,class:"my-reviews-list__button primary",text:"Add a review"},null,8,["onClick"])])])}const ke=w(fe,[["render",Me],["__scopeId","data-v-ee95cecb"]]);const Fe={name:"MyReviewsView",components:{HeraMyReviewsList:ke}},He={class:"my-reviews"},Se={class:"my-reviews__wrapper"};function Ce(s,o,n,p,m,c){const i=r("hera-my-reviews-list");return a(),_("div",He,[e("div",Se,[t(i,{class:"my-reviews__list"})])])}const Ae=w(Fe,[["render",Ce],["__scopeId","data-v-8ed5aef4"]]);export{Ae as default};
